:root {
    color-scheme: light;
    --theme-name: light;

    /* === Reference palette (OKLCH) === */
    --ref-white: oklch(1 0 0deg);
    --ref-black: oklch(0 0 0deg);

    --ref-brand-primary: oklch(0.4244 0.0717 59.27deg);
    --ref-brand-secondary: oklch(0.5595 0.0662 75.61deg);
    --ref-brand-dark: oklch(0.3795 0.0615 60.47deg);
    --ref-brand-deep: oklch(0.3324 0.0532 59.85deg);
    /* Darker variant for text on light backgrounds - meets WCAG AA 4.5:1 */
    --ref-brand-primary-text: oklch(0.3000 0.0717 59.27deg);
    --ref-brand-accent: oklch(0.7541 0.0853 67.10deg);
    --ref-brand-border: oklch(0.7769 0.0445 57.93deg);

    --ref-ink: oklch(0.1776 0 89.88deg);
    --ref-muted: oklch(0.5510 0.0234 264.36deg);
    --ref-mid: oklch(0.5103 0 89.88deg);
    --ref-contrast-low: oklch(0.3211 0 89.88deg);

    --ref-neutral-900: oklch(0.2781 0 0deg);
    --ref-neutral-800: oklch(0.3729 0 0deg);
    --ref-neutral-700: oklch(0.4500 0 0deg);
    --ref-neutral-600: oklch(0.7107 0 0deg);
    --ref-neutral-500: oklch(0.7137 0 0deg);
    --ref-neutral-400: oklch(0.8717 0 0deg);
    --ref-neutral-350: oklch(0.8975 0 0deg);
    --ref-neutral-300: oklch(0.9276 0 0deg);
    --ref-neutral-275: oklch(0.9340 0 0deg);
    --ref-neutral-250: oklch(0.9521 0 0deg);
    --ref-neutral-200: oklch(0.9670 0 0deg);
    --ref-neutral-150: oklch(0.9842 0 0deg);
    --ref-neutral-125: oklch(0.9846 0 0deg);

    --ref-sky-500: oklch(0.6847 0.1479 237.32deg);
    --ref-sky-600: oklch(0.5876 0.1389 241.97deg);
    --ref-blue-500: oklch(0.6231 0.1880 259.81deg);
    --ref-blue-600: oklch(0.5461 0.2152 262.88deg);
    --ref-blue-700: oklch(0.4882 0.2172 264.38deg);

    --ref-green-400: oklch(0.8003 0.1821 151.71deg);
    --ref-green-500: oklch(0.7227 0.1920 149.58deg);
    --ref-green-600: oklch(0.6271 0.1699 149.21deg);
    --ref-orange-500: oklch(0.6461 0.1943 41.12deg);
    --ref-red-500: oklch(0.5771 0.2152 27.33deg);
    --ref-red-accent: oklch(0.6636 0.2231 25.73deg);

    --ref-purple-500: oklch(0.5413 0.2466 293.01deg);
    --ref-emerald-600: oklch(0.5960 0.1274 163.23deg);
    --ref-violet-500: oklch(0.5575 0.2525 302.32deg);
    --ref-cyan-500: oklch(0.6089 0.1109 221.72deg);
    --ref-indigo-600: oklch(0.4568 0.2146 277.02deg);
    --ref-pink-600: oklch(0.5246 0.1990 3.96deg);

    --ref-neutral-950: color-mix(in oklch, var(--ref-black) 85%, var(--ref-white) 15%);
    --ref-neutral-980: color-mix(in oklch, var(--ref-black) 92%, var(--ref-white) 8%);

    /* === Functional tokens === */
    --color-bg-canvas: var(--ref-white);
    --color-bg-surface: var(--ref-neutral-150);
    --color-bg-elevated: color-mix(in oklch, var(--ref-white) 95%, var(--ref-neutral-200) 5%);
    --color-bg-muted: var(--ref-neutral-200);
    --color-bg-inset: var(--ref-neutral-250);
    --color-bg-interactive: var(--ref-brand-primary);
    --color-bg-contrast: var(--ref-white);

    --color-border-subtle: var(--ref-neutral-300);
    --color-border-default: var(--ref-neutral-400);
    --color-border-title: var(--ref-neutral-600);
    --color-border-strong: var(--ref-brand-border);

    --color-text-primary: var(--ref-ink);
    --color-text-secondary: var(--ref-muted);
    --color-text-secondary-dark: var(--ref-neutral-700);
    --color-text-tertiary: var(--ref-neutral-600);
    --color-text-inverse: var(--ref-white);
    --color-text-link: var(--ref-blue-600);
    /* Text color for accent background - ensures high contrast */
    --color-text-on-accent: var(--ref-white);
    /* Dark text for use on light backgrounds (info windows, cards) */
    --color-text-on-light: var(--ref-neutral-900);

    --color-icon-primary: var(--color-text-primary);
    --color-icon-inverse: var(--color-text-inverse);

    --color-accent-primary: var(--ref-brand-primary);
    --color-accent-secondary: var(--ref-brand-secondary);
    --color-accent-hover: color-mix(in oklch, var(--ref-brand-primary) 85%, var(--ref-white) 15%);
    --color-accent-border: var(--ref-brand-border);
    --color-accent-strong: var(--ref-brand-deep);
    /* Darker accent color for text on light backgrounds */
    --color-accent-primary-text: var(--ref-brand-primary-text);

    --color-success: var(--ref-green-500);
    --color-success-strong: var(--ref-green-600);
    --color-warning: var(--ref-orange-500);
    --color-danger: var(--ref-red-500);
    --color-danger-strong: var(--ref-red-accent);
    --color-info: var(--ref-blue-500);

    --focus-ring: color-mix(in oklch, var(--ref-brand-accent) 85%, transparent);

    --overlay-white-strong: color-mix(in oklch, var(--ref-white) 98%, transparent);
    --overlay-white-soft: color-mix(in oklch, var(--ref-white) 90%, transparent);
    --overlay-white-medium: color-mix(in oklch, var(--ref-white) 80%, transparent);
    --overlay-black-80: color-mix(in oklch, var(--ref-black) 80%, transparent);
    --overlay-black-60: color-mix(in oklch, var(--ref-black) 60%, transparent);
    --overlay-black-40: color-mix(in oklch, var(--ref-black) 40%, transparent);
    --overlay-black-30: color-mix(in oklch, var(--ref-black) 30%, transparent);
    --overlay-black-20: color-mix(in oklch, var(--ref-black) 20%, transparent);
    --overlay-black-10: color-mix(in oklch, var(--ref-black) 10%, transparent);
    --brand-overlay-70: color-mix(in oklch, var(--ref-brand-primary) 70%, transparent);
    --brand-overlay-30: color-mix(in oklch, var(--ref-brand-primary) 30%, transparent);

    --shadow-subtle: var(--overlay-black-10);
    --shadow-soft: var(--overlay-black-20);
    --shadow-medium: var(--overlay-black-30);
    --shadow-strong: var(--overlay-black-40);

    /* Category semantic tokens */
    --category-edificio-principal: var(--ref-brand-primary);
    --category-transporte: var(--ref-blue-600);
    --category-cultura-entretenimiento: var(--ref-purple-500);
    --category-infraestructura: var(--ref-emerald-600);
    --category-lugares-historicos: var(--ref-red-500);
    --category-parques-recreacion: var(--ref-green-600);
    --category-museos: var(--ref-violet-500);
    --category-gastronomia: var(--ref-orange-500);
    --category-supermercados: var(--ref-cyan-500);
    --category-servicios: var(--ref-indigo-600);
    --category-vida-nocturna: var(--ref-pink-600);

    /* Layout metrics */
    --max: 1200px;
    --gap: 1.75rem;
}

:root[data-theme='dark'] {
    color-scheme: dark;
    --theme-name: dark;

    --color-bg-canvas: var(--ref-neutral-980);
    --color-bg-surface: color-mix(in oklch, var(--ref-neutral-950) 80%, var(--ref-neutral-300) 20%);
    --color-bg-elevated: color-mix(in oklch, var(--color-bg-surface) 85%, var(--ref-neutral-250) 15%);
    --color-bg-muted: color-mix(in oklch, var(--ref-neutral-950) 70%, var(--ref-neutral-400) 30%);
    --color-bg-inset: color-mix(in oklch, var(--ref-neutral-950) 60%, var(--ref-neutral-300) 40%);
    --color-bg-interactive: color-mix(in oklch, var(--ref-brand-primary) 70%, var(--ref-white) 30%);
    --color-bg-contrast: color-mix(in oklch, var(--ref-neutral-200) 75%, var(--ref-white) 25%);

    --color-border-subtle: color-mix(in oklch, var(--ref-neutral-950) 65%, var(--ref-neutral-300) 35%);
    --color-border-default: color-mix(in oklch, var(--ref-neutral-900) 55%, var(--ref-neutral-250) 45%);
    --color-border-strong: color-mix(in oklch, var(--ref-brand-border) 40%, var(--ref-neutral-900) 60%);
    --color-border-title: color-mix(in oklch, var(--ref-neutral-600) 45%, var(--ref-neutral-200) 55%);

    --color-text-primary: var(--ref-white);
    --color-text-secondary: color-mix(in oklch, var(--ref-white) 75%, var(--ref-neutral-500) 25%);
    --color-text-secondary-dark: color-mix(in oklch, var(--ref-white) 85%, var(--ref-neutral-700) 15%);
    --color-text-tertiary: color-mix(in oklch, var(--ref-white) 60%, var(--ref-neutral-600) 40%);
    --color-text-inverse: color-mix(in oklch, var(--ref-neutral-200) 80%, var(--ref-white) 20%);
    --color-text-link: color-mix(in oklch, var(--ref-blue-500) 85%, var(--ref-white) 15%);
    /* Dark text for use on light backgrounds (info windows, cards) */
    --color-text-on-light: var(--ref-white);

    --color-icon-primary: var(--color-text-primary);
    --color-icon-inverse: var(--ref-neutral-980);

    --color-accent-primary: color-mix(in oklch, var(--ref-brand-primary) 65%, var(--ref-white) 35%);
    --color-accent-secondary: color-mix(in oklch, var(--ref-brand-secondary) 70%, var(--ref-white) 30%);
    --color-accent-hover: color-mix(in oklch, var(--color-accent-primary) 70%, var(--ref-white) 30%);
    --color-accent-border: color-mix(in oklch, var(--ref-brand-border) 55%, var(--ref-neutral-900) 45%);
    --color-accent-strong: color-mix(in oklch, var(--ref-brand-primary) 55%, var(--ref-neutral-900) 45%);

    --color-success: color-mix(in oklch, var(--ref-green-500) 70%, var(--ref-white) 30%);
    --color-success-strong: color-mix(in oklch, var(--ref-green-600) 70%, var(--ref-white) 30%);
    --color-warning: color-mix(in oklch, var(--ref-orange-500) 75%, var(--ref-white) 25%);
    --color-danger: color-mix(in oklch, var(--ref-red-500) 75%, var(--ref-white) 25%);
    --color-danger-strong: color-mix(in oklch, var(--ref-red-accent) 70%, var(--ref-white) 30%);
    --color-info: color-mix(in oklch, var(--ref-blue-500) 75%, var(--ref-white) 25%);

    --focus-ring: color-mix(in oklch, var(--ref-brand-accent) 70%, var(--ref-white) 30%);

    --shadow-subtle: color-mix(in oklch, var(--ref-black) 70%, transparent);
    --shadow-soft: color-mix(in oklch, var(--ref-black) 60%, transparent);
    --shadow-medium: color-mix(in oklch, var(--ref-black) 50%, transparent);
    --shadow-strong: color-mix(in oklch, var(--ref-black) 40%, transparent);

    --category-edificio-principal: color-mix(in oklch, var(--ref-brand-primary) 60%, var(--ref-white) 40%);
    --category-transporte: color-mix(in oklch, var(--ref-blue-600) 65%, var(--ref-white) 35%);
    --category-cultura-entretenimiento: color-mix(in oklch, var(--ref-purple-500) 65%, var(--ref-white) 35%);
    --category-infraestructura: color-mix(in oklch, var(--ref-emerald-600) 65%, var(--ref-white) 35%);
    --category-lugares-historicos: color-mix(in oklch, var(--ref-red-500) 70%, var(--ref-white) 30%);
    --category-parques-recreacion: color-mix(in oklch, var(--ref-green-600) 65%, var(--ref-white) 35%);
    --category-museos: color-mix(in oklch, var(--ref-violet-500) 65%, var(--ref-white) 35%);
    --category-gastronomia: color-mix(in oklch, var(--ref-orange-500) 70%, var(--ref-white) 30%);
    --category-supermercados: color-mix(in oklch, var(--ref-cyan-500) 65%, var(--ref-white) 35%);
    --category-servicios: color-mix(in oklch, var(--ref-indigo-600) 65%, var(--ref-white) 35%);
    --category-vida-nocturna: color-mix(in oklch, var(--ref-pink-600) 65%, var(--ref-white) 35%);
}

/* Category helpers */
.category-color {
    background-color: var(--category-color, var(--color-accent-primary));
}

.category-border {
    border-color: var(--category-color, var(--color-accent-primary));
}

.category-text {
    color: var(--category-color, var(--color-accent-primary));
}

.category-edificio-principal {
    --category-color: var(--category-edificio-principal);
}

.category-transporte {
    --category-color: var(--category-transporte);
}

.category-cultura-entretenimiento {
    --category-color: var(--category-cultura-entretenimiento);
}

.category-infraestructura {
    --category-color: var(--category-infraestructura);
}

.category-lugares-historicos {
    --category-color: var(--category-lugares-historicos);
}

.category-parques-recreacion {
    --category-color: var(--category-parques-recreacion);
}

.category-museos {
    --category-color: var(--category-museos);
}

.category-gastronomia {
    --category-color: var(--category-gastronomia);
}

.category-supermercados {
    --category-color: var(--category-supermercados);
}

.category-servicios {
    --category-color: var(--category-servicios);
}

.category-vida-nocturna {
    --category-color: var(--category-vida-nocturna);
}

[data-section-active] .scroll-animate {
    opacity: 0;
    transform: translate3d(0, var(--scroll-animate-offset, 36px), 0)
        scale(var(--scroll-animate-scale, 0.98));
    transition:
        transform var(--scroll-animate-duration, 420ms) var(--scroll-animate-easing, cubic-bezier(0.22, 1, 0.36, 1)),
        opacity var(--scroll-animate-duration, 420ms) ease;
    transition-delay: var(--scroll-animate-delay, 0ms);
}

[data-section-active='true'] .scroll-animate {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
}

@media (prefers-reduced-motion: reduce) {
    [data-section-active] .scroll-animate {
        transform: none;
        transition-duration: 0ms;
    }
}

* {
    box-sizing: border-box
}

html {
    scroll-behavior: smooth
}

body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    line-height: 1.6;
    color: var(--color-text-primary);
    background: var(--color-bg-canvas);
}

/* ===== helpers ===== */
.wrap {
    max-width: var(--max);
    margin: auto;
    padding: 0 clamp(0.875rem, 3vw, 1.5rem)
}

.vh {
    position: absolute !important;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0 0 0 0);
    white-space: nowrap;
    border: 0
}

/* This is a global override for when the mobile menu is open */
body.nav-open {
    overflow: hidden;
}
